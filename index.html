<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Consultas Internas - Galvão Drones</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%230E5847'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-12h2v4h4v2h-4v4h-2v-4H7v-2h4V8z'%3E%3C/path%3E%3Cpath d='M13.25 7.15c-.24-.24-.58-.36-.92-.36s-.68.12-.92.36L8.4 9.16c-.24.24-.36.58-.36.92s.12.68.36.92l.71.71c.24.24.58.36.92.36s.68-.12.92-.36l2.93-2.93c.24-.24.36-.58.36-.92s-.12-.68-.36-.92l-.71-.71zM10.75 16.85c.24.24.58.36.92.36s-.68-.12.92-.36l2.93-2.93c-.24-.24.36-.58.36-.92s-.12-.68-.36-.92l-.71-.71c-.24-.24-.58-.36-.92-.36s-.68.12-.92.36l-2.93 2.93c-.24.24-.36.58-.36.92s.12.68.36.92l.71.71zM18.8 8.4l-.71-.71c-.24-.24-.58-.36-.92-.36s-.68.12-.92.36L13.3 9.77c-.24.24-.36.58-.36.92s.12.68.36.92l.71.71c.24.24.58.36.92.36s.68-.12.92-.36l3.85-3.85c.24-.24.36-.58.36-.92s-.12-.68-.36-.92zM5.2 15.6l.71.71c.24.24.58.36.92.36s.68-.12.92.36l3.85-3.85c-.24-.24-.36-.58-.36-.92s-.12-.68-.36-.92l-.71-.71c-.24-.24-.58-.36-.92-.36s-.68.12-.92.36L5.2 14.68c-.24.24-.36.58-.36.92s.12.68.36.92z'%3E%3C/path%3E%3C/svg%3E" type="image/svg+xml">
    <style>
        /* --- ESTILOS GERAIS (CSS) COM A PALETA GALVÃO DRONES --- */
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

        :root {
            --primary-color: #EF7E13; /* Laranja Galvão Drones */
            --secondary-color: #0E5847; /* Verde Galvão Drones */
            --light-grey: #f4f7f6;
            --medium-grey: #ecf0f1;
            --dark-grey: #bdc3c7;
            --danger-color: #e74c3c;
            --whatsapp-color: #25D366;
            --instagram-color: #C13584; /* Cor do Instagram */
            --youtube-color: #FF0000; /* Cor do YouTube */
            --help-color: #5865F2;
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            background-color: var(--light-grey);
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            position: relative; /* Adicionado para o pseudo-elemento */
        }

        /* Adiciona a imagem de fundo com opacidade */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://images.pexels.com/photos/2246476/pexels-photo-2246476.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.1; /* Opacidade da imagem de fundo */
            z-index: -1;
            transition: background-image 0.5s ease-in-out, opacity 0.5s ease-in-out; /* Adiciona transição */
        }

        /* Nova classe para o fundo do modo visitante */
        body.visitor-mode-bg::before {
            background-image: url('https://i.imgur.com/b3lg2eE.png'); /* URL da sua logo no Imgur */
            background-size: contain; /* Ajusta a imagem para caber sem cortar */
            background-position: center center; /* Centraliza a imagem */
            background-repeat: no-repeat; /* Evita repetição */
            opacity: 0.5; /* Ajuste a opacidade conforme preferir */
        }


        .container {
            width: 100%;
            max-width: 1200px;
            margin: 20px;
            z-index: 1;
        }

        /* --- TELA DE LOGIN --- */
        #login-screen {
            background-color: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
            transition: opacity 0.5s ease;
            margin: auto; /* Garante centralização */
        }
        #company-logo {
            max-width: 300px; /* Ajuste a largura máxima conforme necessário */
            width: 80%;
            display: block;
            margin: 0 auto 10px auto; /* Centraliza a imagem e adiciona margem inferior */
        }
        #portal-subtitle {
             color: #555;
             margin-top: 0;
             margin-bottom: 40px;
             font-size: 1.2em;
             font-weight: 400;
        }
        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #555;
        }
        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 16px;
            font-family: 'Roboto', sans-serif;
        }
        .action-button {
            width: 100%;
            padding: 15px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 10px; /* Adicionado para separar botões */
        }
        .action-button:hover {
            opacity: 0.9;
        }
        #login-error {
            color: var(--danger-color);
            margin-top: 15px;
            font-weight: 500;
            display: none;
        }
        #visitor-mode-button {
            background-color: var(--dark-grey);
        }
        #visitor-mode-button:hover {
            background-color: #95a5a6;
        }


        /* --- TELA PRINCIPAL DO APP --- */
        #app-screen {
            display: none; /* Começa escondida */
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: opacity 0.5s ease;
        }
        header {
            background-color: var(--secondary-color);
            color: white;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px; /* Altura fixa para o header */
        }
        .header-left { 
            display: flex; 
            align-items: center; 
            gap: 20px; 
            height: 100%; /* Ocupa a altura do header */
        }
        #nav-toggle-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0 10px;
            margin-right: 15px; /* Adicionado para separar do título */
            height: 100%; /* Para alinhar verticalmente */
            display: flex; /* Para alinhar o ícone */
            align-items: center; /* Para alinhar o ícone */
            z-index: 1001; /* Acima do menu para ser clicável */
        }
        header h1 {
            margin: 0;
            font-size: 24px;
        }
        #logout-button {
            background-color: var(--danger-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        #logout-button:hover {
            background-color: #c0392b;
        }

        /* Estilos específicos para o cabeçalho no modo visitante */
        .visitor-header #welcome-message,
        .visitor-header #logout-button {
            display: none;
        }

        .app-body {
            display: flex;
            position: relative; /* Para o main-content não empurrar a nav */
            min-height: calc(100vh - 60px); /* Ajusta a altura para caber o header */
        }
        nav {
            width: 200px;
            min-width: 200px;
            background-color: var(--medium-grey);
            padding: 20px 0;
            border-right: 1px solid var(--dark-grey);
            transition: transform 0.3s ease;
            box-sizing: border-box; /* Garante que padding não adicione largura */
            display: flex; /* Para controlar a ordem dos botões com flex-order */
            flex-direction: column; /* Para empilhar os botões verticalmente */
            flex-shrink: 0; /* Previne que a nav encolha */
        }
        /* Oculta nav por padrão no mobile, prepara para slide-in */
        @media (max-width: 768px) {
            nav {
                position: fixed; /* Fixa a nav sobre o conteúdo */
                top: 0; /* Começa no topo da viewport */
                left: 0;
                height: 100vh; /* Altura total da viewport */
                width: 250px; /* Largura da nav quando aberta */
                min-width: 250px;
                transform: translateX(-100%); /* Começa fora da tela (escondida) */
                z-index: 999; /* Garante que fique acima de outros elementos */
                box-shadow: 2px 0 5px rgba(0,0,0,0.2); /* Sombra para destacar */
                padding-top: 60px; /* Espaço para o cabeçalho do app, que tem 60px de altura */
                border-right: 1px solid var(--dark-grey); /* Mantém borda */
            }
            nav.nav-open { /* Classe para quando a nav está aberta */
                transform: translateX(0); /* Desliza para dentro da tela */
            }
            .nav-header {
                display: flex; /* Mostra o cabeçalho da nav no mobile */
                position: absolute; /* Fixa o cabeçalho no topo da nav */
                top: 0;
                width: 100%;
                height: 60px; /* Mesma altura do header principal */
                background-color: var(--secondary-color); /* Cor de fundo para o cabeçalho da nav */
                color: white;
                padding: 15px 20px;
                box-sizing: border-box;
                align-items: center;
            }
            .nav-header #nav-toggle-btn-close {
                font-size: 24px;
                background: none;
                border: none;
                color: white;
                cursor: pointer;
                padding: 0 10px;
            }
             .nav-header span {
                flex-grow: 1;
                text-align: center;
                margin-left: -20px; /* Ajuste para centralizar o texto "Menu" */
                font-size: 1.2em; /* Tamanho do título do menu */
            }
            .app-body {
                flex-direction: column; /* Pilha itens verticalmente no mobile */
                min-height: calc(100vh - 60px); /* Reduz min-height para acomodar o header fixo */
            }
        }

        nav button {
            display: block;
            width: 100%;
            padding: 15px 20px;
            background: none;
            border: none;
            text-align: left;
            font-size: 16px;
            cursor: pointer;
            border-bottom: 1px solid #ddd;
            transition: background-color 0.3s, color 0.3s;
        }
        nav button.active, nav button:hover {
            background-color: var(--dark-grey);
            color: var(--secondary-color);
            font-weight: 700;
        }
        /* Oculta o cabeçalho da nav no desktop */
        .nav-header {
            display: none; 
            align-items: center;
            padding: 15px 20px;
            background-color: var(--dark-grey);
            color: var(--secondary-color);
            font-weight: 700;
        }
        .nav-header span {
            margin-left: 10px;
        }

        main {
            flex-grow: 1;
            padding: 30px;
            max-height: calc(100vh - 60px); /* Ajusta max-height para acomodar o header fixo */
            overflow-y: auto;
            position: relative;
            transition: margin-left 0.3s ease;
        }
        @media (max-width: 768px) {
            main {
                padding: 20px;
                max-height: calc(100vh - 60px); /* Ajusta a altura da área de conteúdo para caber o header */
                width: 100%; /* Ocupa a largura total */
            }
            header {
                padding: 10px 15px;
                position: sticky; /* Fixa o header no topo */
                top: 0;
                z-index: 100; /* Garante que o header fique sobre o conteúdo */
            }
            header h1 {
                font-size: 20px;
            }
            #nav-toggle-btn {
                margin-right: 0; /* Remove a margem extra no mobile */
                z-index: 1000; /* Garante que o botão esteja sempre visível no topo */
            }
            .header-left {
                gap: 10px;
                flex-grow: 1; /* Permite que o welcome message ocupe o espaço */
            }
            #welcome-message {
                margin-left: 0; /* Ajusta a margem para telas menores */
                flex-grow: 1; /* Permite que ocupe o espaço */
            }
        }


        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .content-section h2, .content-section h3 {
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            color: var(--secondary-color);
        }
        .content-section h3 {
             border-bottom: 1px solid var(--dark-grey);
             font-size: 1.2em;
             margin-top: 30px;
        }

        /* --- Barra de Pesquisa --- */
        .search-bar {
            margin-bottom: 20px;
            position: relative;
        }
        .search-bar input {
            width: 100%; padding: 12px 12px 12px 40px; font-size: 16px; border-radius: 5px; border: 1px solid #ccc; box-sizing: border-box;
        }
        .search-bar::before {
            content: '🔎'; position: absolute; left: 12px; top: 50%; transform: translateY(-50%); font-size: 18px; opacity: 0.6;
        }
        
        /* --- ESTILOS DOS CARDS --- */
        .card {
    position: relative; /* Necessário para o pseudo-elemento */
    border: 1px solid #ddd;
    padding: 20px;
    margin-bottom: 15px;
    border-radius: 5px;
    transition: box-shadow 0.3s;
    z-index: 1; /* Garante que o conteúdo fique acima do background */
}

.card::before {
    content: ""; /* Fundamental para o pseudo-elemento aparecer */
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: url("logo.png");
    background-size: 50%;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0.15; /* Ajuste este valor para a opacidade desejada */
    z-index: -1; /* Envia o background para trás do conteúdo */
    border-radius: 5px; /* Mantém o mesmo border-radius do card */
}
        .card:hover { box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .card h3 { margin-top: 0; color: var(--secondary-color); border: none; font-size: 1.3em; } /* Ajuste de fonte */
        .product-card { border-left: 5px solid var(--primary-color); }
        .supplier-card { border-left: 5px solid var(--secondary-color); }
        .info-card { border-left: 5px solid var(--secondary-color); }
        .product-spec { white-space: pre-wrap; line-height: 1.6; font-size: 0.95em; } /* Ajuste de fonte */

        .price { font-size: 1.2em; font-weight: 700; color: #27ae60; }
        .cost-price { font-size: 1.1em; font-weight: 700; color: var(--danger-color); background-color: #fdd; padding: 5px; border-radius: 4px; display: inline-block; margin-top: 10px; }
        .supplier-info { font-size: 0.9em; font-weight: 500; color: var(--secondary-color); background-color: #e8f8f5; padding: 5px 8px; border-radius: 4px; display: inline-block; margin-top: 10px; margin-left: 10px;}
        
        /* --- BOTÕES DE AÇÃO DO PRODUTO --- */
        .action-buttons-container { margin-top: 15px; display: flex; flex-wrap: wrap; gap: 10px; }
        .action-buttons-container button, .action-buttons-container a.action-button {
            color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-weight: 500; transition: background-color 0.3s;
            font-size: 0.9em; /* Ajuste de fonte */
            text-decoration: none; /* Para os links */
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .gemini-button { background-color: var(--secondary-color); }
        .whatsapp-button { background-color: var(--whatsapp-color); }
        .instagram-button { background-color: var(--instagram-color); } /* Estilo para botão Instagram */
        .youtube-button { background-color: var(--youtube-color); } /* Estilo para botão YouTube */
        .google-maps-button { background-color: #4285F4; } /* Estilo para botão Google Maps */

        .help-button { background-color: var(--help-color); }
        .action-buttons-container button:hover, .action-buttons-container a.action-button:hover { opacity: 0.9; }

        /* --- CALCULADORA --- */
        .calculator-container { margin-top: 20px; padding-top: 20px; border-top: 1px dashed var(--dark-grey); }
        .payment-method-selector label { display: inline-block; margin-right: 15px; cursor: pointer; font-size: 0.95em; }
        .payment-method-selector input { margin-right: 5px; }
        .installments-container { margin-top: 10px; }
        .calculate-product-btn { background-color: var(--secondary-color); color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; margin-top: 10px;}
        .product-calculator-result, #general-calculator-result { margin-top: 15px; font-size: 1.1em; color: var(--secondary-color); background-color: #eaf5ff; padding: 15px; border-radius: 5px; }
        .result-vista { font-weight: bold; }
        .result-parcelado { margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--dark-grey); }
        .result-parcelado small { font-size: 0.9em; font-weight: normal; color: #555; }
        
        /* Estilos para o desconto à vista */
        .discount-option {
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative; /* Para posicionar o texto opaco */
        }
        .discount-option input[type="number"] {
            width: 80px; /* Ajuste a largura conforme necessário */
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
            background-color: transparent; /* Permite ver o fundo com a marca d'água */
            position: relative; /* Para estar acima do pseudo-elemento */
            z-index: 1; /* Garante que o input esteja por cima */
        }
        .discount-option label {
            margin-bottom: 0; /* Remover margem inferior do label */
        }
        /* Texto opaco de "max. 15%" */
        .discount-option::after {
            content: "max. 15%";
            position: absolute;
            left: 105px; /* Ajuste para alinhar com o input */
            color: #ccc; /* Cor do texto opaco */
            font-size: 0.8em;
            opacity: 0.8; /* Opacidade do texto */
            pointer-events: none; /* Não interfere com o input */
            white-space: nowrap; /* Evita quebra de linha */
            transform: translateY(2px); /* Pequeno ajuste vertical */
            z-index: 0; /* Fica abaixo do input */
        }


        /* --- MODAL E SCROLL TO TOP --- */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); padding-top: 60px; }
        .modal-content { background-color: #fefefe; margin: 5% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 600px; border-radius: 8px; position: relative; }
        .close-button { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; }
        .loader { border: 8px solid #f3f3f3; border-radius: 50%; border-top: 8px solid var(--primary-color); width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        #scroll-to-top { position: fixed; bottom: 20px; right: 30px; z-index: 99; border: none; outline: none; background-color: var(--primary-color); color: white; cursor: pointer; padding: 12px 15px; border-radius: 50%; font-size: 18px; display: none; }

        /* --- GESTÃO DE USUÁRIOS --- */
        #temp-user-list-container { margin-top: 30px; }
        .temp-user-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid var(--medium-grey); }
        .temp-user-item:last-child { border-bottom: none; }
        .user-info p { margin: 0; }
        .user-info p small { color: #555; }
        .user-actions button { margin-left: 10px; padding: 5px 10px; border-radius: 4px; border: none; color: white; cursor: pointer; }
        .edit-btn { background-color: var(--primary-color); }
        .delete-btn { background-color: var(--danger-color); }

        .hidden { display: none !important; }

        /* --- BOTÃO FLUTUANTE DE CHAT AI --- */
        #ai-chat-button {
            position: fixed;
            bottom: 90px; /* Ajuste para não colidir com o "Scroll to Top" */
            right: 30px;
            z-index: 99;
            border: none;
            outline: none;
            background-color: var(--secondary-color); /* Verde Galvão Drones */
            color: white;
            cursor: pointer;
            padding: 15px 18px;
            border-radius: 50%;
            font-size: 24px;
            display: none; /* Inicia escondido */
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: background-color 0.3s, transform 0.3s;
        }

        #ai-chat-button:hover {
            background-color: #0A4538; /* Um tone mais escuro do verde */
            transform: translateY(-3px);
        }

        #ai-chat-button:active {
            transform: translateY(0);
        }

        /* Estilos específicos para o modal de chat AI, se necessário */
        #ai-chat-modal .modal-content {
            max-width: 700px;
        }

        #ai-chat-modal-body {
            text-align: left;
        }

        #ai-question-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 1em;
            margin-bottom: 15px;
        }

        #submit-ai-question {
            width: auto;
            padding: 10px 20px;
            font-size: 1em;
        }

        #ai-response-area {
            white-space: pre-wrap; /* Mantém quebras de linha e espaços */
            max-height: 300px; /* Limita a altura da resposta */
            overflow-y: auto; /* Adiciona scroll se a resposta for longa */
            border: 1px solid #ddd;
            padding: 10px; /* Adicionado padding para melhor leitura */
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="login-screen">
            <img src="https://i.imgur.com/b3lg2eE.png" alt="Logotipo Galvão Drones" id="company-logo">
            <h2 id="portal-subtitle">Portal Interno</h2>
            <div class="input-group"><label for="username">Usuário</label><input type="text" id="username" placeholder="Digite seu nome"></div>
            <div class="input-group"><label for="password">Senha</label><input type="password" id="password" placeholder="Sua senha"></div>
            <button id="login-button" class="action-button">Entrar</button>
            <button id="visitor-mode-button" class="action-button">Modo Visitante</button>
            <p id="login-error">Usuário ou senha inválidos.</p>
        </div>

        <div id="app-screen">
            <header>
                <div class="header-left">
                    <button id="nav-toggle-btn" class="nav-toggle-btn">☰</button>
                    <span id="welcome-message"></span>
                    <h1>Portal Interno</h1>
                </div>
                <div>
                    <button id="logout-button">Sair</button>
                </div>
            </header>
            <div class="app-body">
                <nav>
                    <div class="nav-header">
                        <button id="nav-toggle-btn-close" class="nav-toggle-btn">✕</button>
                        <span>Menu</span>
                    </div>
                    <button class="nav-button" data-section="products-section" id="products-nav-button" style="order: 1;">Produtos</button>
                    <button class="nav-button" data-section="calculator-section" id="calculator-nav-button" style="order: 2;">Calculadora</button>
                    <button class="nav-button" data-section="suppliers-section" id="suppliers-nav-button" style="order: 3;">Fornecedores</button>
                    <button class="nav-button" data-section="settings-section" id="settings-nav-button" style="order: 4;">Configurações</button>
                    <button class="nav-button" data-section="drones-visitor-section" id="drones-nav-button" style="order: 5;">Drones</button>
                    <button class="nav-button" data-section="info-section" id="info-empresa-nav-button" style="order: 6;">Info Empresa</button>
                </nav>
                <main id="main-content">
                    <section id="products-section" class="content-section">
                        <h2>Consulta de Produtos</h2>
                        <div class="search-bar"><input type="text" id="product-search" placeholder="Pesquisar por nome ou especificação..."></div>
                        <div id="product-list"></div>
                    </section>
                    <section id="calculator-section" class="content-section">
                        <h2>Calculadora Geral</h2>
                        <div class="card">
                           <div class="input-group">
                                <label for="general-valor-base">Valor Base</label>
                                <input type="number" id="general-valor-base" class="input-full" placeholder="Digite o valor para simulação">
                           </div>
                           <div class="input-group">
                                <label>Forma de Pagamento</label>
                                <div id="general-payment-method-selector">
                                    <input type="radio" id="general-payment-vista" name="general-payment-method" value="vista" checked>
                                    <label for="general-payment-vista">À vista</label>
                                    <input type="radio" id="general-payment-parcelado" name="general-payment-method" value="parcelado">
                                    <label for="general-payment-parcelado">Parcelado</label>
                                </div>
                           </div>
                           <div class="input-group hidden" id="general-installments-container">
                                <label for="general-parcelas">Número de Parcelas</label>
                                <select id="general-parcelas">
                                    <option value="1">1x</option><option value="2">2x</option><option value="3">3x</option><option value="4">4x</option><option value="5">5x</option><option value="6">6x</option><option value="7">7x</option><option value="8">8x</option><option value="9">9x</option><option value="10">10x</option><option value="11">11x</option><option value="12">12x</option>
                                </select>
                           </div>
                           <button id="general-calculate-button" class="action-button" style="width: auto; padding: 10px 20px;">Calcular</button>
                           <div id="general-calculator-result">O resultado da simulação aparecerá aqui.</div>
                        </div>
                    </section>
                    <section id="suppliers-section" class="content-section"><h2>Fornecedores (Acesso Confidencial)</h2><div id="supplier-list"></div></section>
                    <section id="settings-section" class="content-section">
                        <h2>Configurações</h2>
                        <div class="card">
                            <h3>Criar Usuário Temporário</h3>
                            <form id="create-temp-user-form">
                                <div class="input-group"><label for="temp-username">Nome de Usuário</label><input type="text" id="temp-username" required></div>
                                <div class="input-group"><label for="temp-password">Senha</label><input type="text" id="temp-password" required></div>
                                <div class="input-group"><label for="temp-duration">Duração do Acesso</label><select id="temp-duration"><option value="1">1 Hora</option><option value="8">8 Horas</option><option value="24" selected>24 Horas</option><option value="72">72 Horas</option></select></div>
                                <button type="submit" class="action-button">Criar Usuário</button>
                                <p id="temp-user-feedback" style="margin-top: 15px; font-weight: bold;"></p>
                            </form>
                        </div>
                        <div id="temp-user-list-container">
                            <h3>Gerir Usuários Temporários</h3>
                            <div id="temp-user-list" class="card"></div>
                        </div>
                    </section>
                    <section id="drones-visitor-section" class="content-section">
                        <h2>Modelos de Drones</h2>
                        <div class="search-bar"><input type="text" id="drone-visitor-search" placeholder="Pesquisar por modelo ou especificação..."></div>
                        <div id="drone-visitor-list"></div>
                    </section>
                    <section id="info-section" class="content-section">
                        <h2>Informações da Empresa</h2>
                        <div class="card info-card">
                            <p><strong>Nome da Empresa:</strong> Galvão Drones</p>
                            <p id="cnpj-display-line"><strong>CNPJ:</strong> 60.102.179/0001-10</p>
                            <p><strong>Endereço:</strong> Rua 16, nº 304 – Setor Aeroviário, Goiânia – GO, CEP: 74435-240</p>
                            <p><a href="https://www.google.com/maps/search/Galv%C3%A3o+Drones+em+Goi%C3%A2nia+Goi%C3%A1s" target="_blank" class="action-button google-maps-button" style="width: auto; padding: 10px 15px; margin-right: 10px;">Ver no Google Maps</a></p>
                            <p><strong>Contato:</strong> (62) 3636-0668</p>
                            <div class="contact-buttons-container" style="display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;">
                                <a href="https://www.instagram.com/galvao_drones" target="_blank" class="action-button instagram-button" style="width: auto; padding: 10px 15px;">Instagram</a>
                                <a href="https://wa.me/556236360668" target="_blank" class="action-button whatsapp-button" style="width: auto; padding: 10px 15px;">WhatsApp</a>
                                <a href="https://www.youtube.com/@Galv%C3%A3oDronesofc" target="_blank" class="action-button youtube-button" style="width: auto; padding: 10px 15px;">YouTube</a>
                            </div>
                            <p><strong>Website:</strong> <a href="http://www.galvaodrones.com.br" target="_blank">www.galvaodrones.com.br</a></p>
                        </div>
                    </section>
                </main>
            </div>
        </div>
    </div>
    
    <button id="scroll-to-top" title="Voltar ao topo">⬆</button>

    <button id="ai-chat-button" title="Falar com a IA">🤖</button>

    <div id="main-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">×</span>
            <h3 id="modal-title">Aviso</h3>
            <div id="modal-body"></div>
        </div>
    </div>

    <div id="ai-chat-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="ai-chat-close-button">×</span>
            <h3 id="ai-chat-modal-title">Assistente Galvão Drones</h3>
            <div id="ai-chat-modal-body">
                <div class="input-group">
                    <label for="ai-question-input">Qual a sua pergunta sobre drones ou Galvão Drones?</label>
                    <textarea id="ai-question-input" rows="5" placeholder="Ex: 'Quais drones são ideais para filmagem profissional?' ou 'Qual o horário de funcionamento da loja?'"></textarea>
                </div>
                <button id="submit-ai-question" class="action-button">Perguntar</button>
                <div id="ai-response-area" style="margin-top: 20px; padding: 15px; background-color: #f0f0f0; border-radius: 5px; min-height: 50px; display: none;"></div>
                <div class="loader" id="ai-loader" style="display: none;"></div>
            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- BANCO DE DADOS SIMULADO ---
    const currentYear = new Date().getFullYear(); 

    const USERS = {
        'mikhaell': { password: 'mk0639', role: 'admin', type: 'permanent' }, 
        'Maikhon':  { password: 'maik' + currentYear, role: 'admin', type: 'permanent' },
        'Ryan':     { password: 'ryan' + currentYear, role: 'admin', type: 'permanent' },
        'Fineias':  { password: 'fin' + currentYear, role: 'seller', type: 'permanent' },
        'Rafael':   { password: 'raf' + currentYear, role: 'seller', type: 'permanent' },
        'Eduardo': { password: 'edu' + currentYear, role: 'seller', type: 'permanent' },
        
        // Usuários de venda atualizados com senhas seguindo o padrão das 3 primeiras letras + ano atual
        'mikhaellven': { password: 'mik' + currentYear, role: 'seller', type: 'permanent' },
        'maikhonven':  { password: 'mai' + currentYear, role: 'seller', type: 'permanent' },
        'ryanven':     { password: 'rya' + currentYear, role: 'seller', type: 'permanent' },
    };
    const CONFIDENTIAL_CODE = '@0639';
    const PRODUCTS = [
        { id: 1, name: 'DJI Neo Standard', spec: '🛸 DJI Neo Standard ou Combo fly more\n🎥 Grava em 4K/30fps\n⏱️ Até 18 minutos de voo\n📡 Alcance de até 6 km\n⚖️ Peso de apenas 135 g\n🎮 Controle via app, com controle ou controle motion ( três versões)', salePrice: 1900, costPrice: 1340, supplier: 'Arroba Celulares' },
        { id: 2, name: 'DJI Neo Combo', spec: '🛸 DJI Neo Standard ou Combo fly more\n🎥 Grava em 4K/30fps\n⏱️ Até 18 minutos de voo\n📡 Alcance de até 6 km\n⚖️ Peso de apenas 135 g\n🎮 Controle via app, com controle ou controle motion ( três versões)', salePrice: 3500, costPrice: 2460, supplier: 'Arroba Celulares' },
        { id: 3, name: 'DJI Mini 3 (sem tela)', spec: '🛸 DJI Mini 3\n🎥 Grava em 4K HDR a 30fps\n⏱️ Até 38 minutos de voo\n📡 Distância de até 18 km\n⚖️ Peso leve: 249 g\n🎮 Controle com ou sem tela (duas versões)', salePrice: 3990, costPrice: 2990, supplier: 'Arroba Celulares' },
        { id: 4, name: 'DJI Mini 3 (com tela)', spec: '🛸 DJI Mini 3\n🎥 Grava em 4K HDR a 30fps\n⏱️ Até 38 minutos de voo\n📡 Distância de até 18 km\n⚖️ Peso leve: 249 g\n🎮 Controle com ou sem tela (duas versões)', salePrice: 4785, costPrice: 3785, supplier: 'Arroba Celulares' },
        { id: 5, name: 'DJI Flip Fly More Combo (com tela)', spec: '🛸 DJI Flip\n🎥 4K a 60fps (com slow motion de até 100fps!)\n⏱️ Até 31 minutos no ar\n📡 Alcance médio de 13 km\n⚖️ Menos de 249 g\n🎮 Disponível com ou sem controle com tela', salePrice: 7990, costPrice: 5320, supplier: 'DJI Grupo Multi' },
        { id: 64, name: 'DJI Mini 4 Pro Fly More Combo Plus (com tela)', spec: '🛸 DJI Mini 4 Pro\n🎥 Incrível 4K HDR a 100fps + fotos de 48 MP\n⏱️ Até 45 minutos no air\n📡 Alcance de até 25 km\n⚖️ Abaixo de 249 g\n🎮 Controle com tela (DJI RC 2)', salePrice: 9000.00, costPrice: 6990.00, supplier: 'DJI Grupo Multi' },
        { id: 67, name: 'DJI Avata 2 Fly More Combo (1 bateria)', spec: '🛸 DJI Avata 2\n🎥 Gravação 4K 60fps com lente ultrawide\n⏱️ Até 23 minutos de voo imersivo\n📡 Alcance de até 13 km\n⚖️ Peso de 377 g\n🎮 Controle por movimento + óculos FPV (sem tela)', salePrice: 10590.00, costPrice: 7069.91, supplier: 'DJI Grupo Multi' },
        { id: 68, name: 'DJI Avata 2 Fly More Combo (3 baterias)', spec: '🛸 DJI Avata 2\n🎥 Gravação 4K 60fps com lente ultrawide\n⏱️ Até 23 minutos de voo imersivo\n📡 Alcance de até 13 km\n⚖️ Peso de 377 g\n🎮 Controle por movimento + óculos FPV (sem tela)', salePrice: 12990.00, costPrice: 8674.53, supplier: 'DJI Grupo Multi' },
        { id: 65, name: 'DJI Air 3S Standard (sem tela)', spec: '🛸 DJI Air 3S (Versão Standard)\n🎥 4K 60fps com sensores duplos (wide + tele)\n⏱️ Até 45 minutos no ar\n📡 Alcance insano de 32 km\n⚖️ Peso de 724 g\n🎮 Controle sem tela (standard)', salePrice: 12790.00, costPrice: 8532.92, supplier: 'DJI Grupo Multi' },
        { id: 72, name: 'DJI Mavic 4 Pro Combo (com tela)', spec: '🚀 DJI Mavic 4 Pro\n🎥 5.1K a 120fps com sensor 4/3 CMOS\n⏱️ Até 46 minutos de voo\n📡 Alcance de até 32 km\n⚖️ 958 g\n🎮 Controle com tela (DJI RC Pro)', salePrice: 26670.00, costPrice: 19920.00, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 71, name: 'DJI Mavic 4 Pro Creator Combo (HDMI, 512GB)', spec: '🚀 DJI Mavic 4 Pro Creator Combo\nMesmo conjunto do Mavic 4 Pro com:\n🎒 Acessórios profissionais\n🔋 Baterias extras e hub inteligente\n🧳 Maleta reforçada para transporte\n🎮 Controle com tela (DJI RC Pro 2)', salePrice: 35650.00, costPrice: 26650.00, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 39, name: 'DJI Mavic 3 Multispectral', spec: '🌱 DJI Mavic 3 Multispectral (Versão Standard)\n🎥 Câmera RGB 20 MP + 4 sensores multispectrais\n⏱️ Até 43 minutos por voo\n📡 Alcance de 15 km\n⚖️ 951 g\n🎮 Controle com tela (DJI RC Pro Enterprise)\n🧪 Ideal para agricultura de precisão e NDVI', salePrice: 43970, costPrice: 32990.00, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 40, name: 'DJI Mavic 3 Thermal', spec: '🔥 DJI Mavic 3 Thermal (Versão Standard)\n🎥 4K + câmera térmica 640x512 px\n⏱️ Até 45 minutos por voo\n📡 Alcance de 15 km\n⚖️ 920 g\n🎮 Controle com tela (DJI RC Pro Enterprise)\n🔥 Ideal para inspeção, resgate e segurança', salePrice: 41700, costPrice: 31990.00, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 41, name: 'DJI Mavic 3 Enterprise', spec: '🗺️ DJI Mavic 3 Enterprise (Versão Standard)\n🎥 Câmera RGB 20 MP com obturador mecânico\n🗺️ Compatível com RTK, alto-falante e holofote\n⏱️ Até 45 minutos de voo\n📡 Alcance de 15 km\n⚖️ 915 g\n🎮 Controle com tela (DJI RC Pro Enterprise)\n📐 Indicado para mapeamentos e medições técnicas', salePrice: 31270, costPrice: 23990.00, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 42, name: 'DJI Matrice 4T', spec: '🛠️ DJI Matrice 4T (Versão Standard)\n🎥 RGB 48 MP + Zoom híbrido 56x + Câmera térmica de alta resolução\n🧭 Visão tripla: Wide, Zoom e Térmica\n⏱️ Até 55 minutos por voo\n📡 Alcance de até 20 km\n⚖️ Peso: 3,7 kg\n🎮 Controle DJI RC Plus com tela de 7” ultra brilhante\n💼 IP55 – Ideal para resgate, combate a incêndio e inspeções', salePrice: 61990, costPrice: 45302.65, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 43, name: 'DJI Matrice 4E', spec: '🛠️ DJI Matrice 4E (Versão Standard)\n🎥 Câmera ampla de 20 MP com obturador mecânico\n🧭 Suporte a RTK, payloads e expansões avançadas\n⏱️ Até 55 minutos de voo\n📡 Alcance de até 20 km\n⚖️ Peso: 3,4 kg\n🎮 Controle DJI RC Plus\n🔧 Ideal para mapeamento, segurança e vigilância industrial', salePrice: 58589.97, costPrice: 43112.98, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 113, name: 'DJI Matrice 30T', spec: '🛠️ DJI Matrice 30T (Versão Standard)\n🎥 Câmera Wide 48 MP + Zoom Híbrido + Câmera Térmica\n⏱️ Até 41 minutos por voo\n📡 Alcance de até 15 km\n⚖️ Peso: 3,77 kg\n🎮 Controle DJI RC Plus com tela de 7”\n💼 Proteção IP55 – Ideal para operações em campo aberto', salePrice: 0, costPrice: 0, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 114, name: 'DJI Matrice 350 RTK', spec: '🛠️ DJI Matrice 350 RTK (Versão Standard)\n🎥 Compatível com payloads L2, P1, H30T e sensores externos\n🧭 RTK integrado para mapeamento de alta precisão\n⏱️ Até 55 minutos de voo\n📡 Alcance de até 20 km\n⚖️ Peso médio de 3,8 kg sem carga\n🎮 Controle DJI RC Plus com tela de 7”\n💼 Estrutura reforçada com proteção IP55', salePrice: 0, costPrice: 0, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 44, name: 'GOHOBBY SENTINEL', spec: '🛡️ GOHOBBY Sentinel\nUm sistema passivo de detecção, sem interferências, ideal para monitoramento discreto:\n📡 Frequências: 2.4 GHz, 5.1 GHz, 5.8 GHz\n🛩️ Protocolos suportados: DJI (O1–O4), Autel, eWiFi, PAL, NTSC, LightBridge, Datalink\n📍 Alcance de detecção: até 5 km\n🔁 Detecção simultânea: até 10 drones\n⏱️ Tempo de localização: ≤ 3 s\n🕒 Autonomia da bateria: até 12 h\n🎯 Precisão de localização: ≤ 3 m\n💻 Tela: 6.3” touchscreen\n🌐 Conectividade: Wi‑Fi e LTE\n⚖️ Peso: 0,65 kg + bateria externa (~0,6 kg)\n⚙️ IP: IP54', salePrice: 135990, costPrice: 108590.00, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 45, name: 'SKYFEND HUNTER', spec: '🌩️ Skyfend Hunter (AFA100)\nUm jammer portátil com detecção e contra-ação integrada, típico “gun”:\n📡 Detecção omnidirecional: até 2 km\n🚫 Jamming direcional: até 3 km\n📶 Cobertura de frequência: 400 MHz–6 GHz (RF + GNSS: GPS, Glonass, Beidou, Galileo)\n⏱️ Autonomia: até 8 h em espera e 1 h com jamming ativo\n🕌 Tela: touchscreen 3,5”\n🔄 Adaptabilidade: adaptação automática de frequência\n⚙️ IP: IP65\n⚖️ Peso: aprox. 6,5 kg', salePrice: 379749, costPrice: 265822.10, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 46, name: 'SKYFEND BLADER', spec: '⚡ Skyfend Blader\nUm jammer portátil de alta potência, enxuto e focado na neutralização:\n🌐 Alcance de jamming: até 1,5 km\n📶 Cobertura de frequência: 868 MHz, 915 MHz, 1.2 GHz, 1.4 GHz, 1.6 GHz, 2.4 GHz, 4.95 GHz, 5.2–5.8 GHz\n⏱️ Jamming ativado: até 30 min\n🧭 Direção e campo de visão: azimute ±15°, pitch ±10°\n⚖️ Peso: ≈ 4 kg\n⚙️ IP: IP65', salePrice: 147898.28, costPrice: 106328.80, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 31, name: 'Câmera DJI Osmo Pocket 3 Standard', spec: '📷 DJI Osmo Pocket 3 Standard\n🎥 Gravação em 4K com sensor grande\n📱 Tela articulada touchscreen\n🔁 Gimbal mecânico de 3 eixos\n💡 Ideal para criadores que filmam em movimento\n🔋 Autonomia de até 120 minutos\n📦 Compacta e leve: cabe no bolso', salePrice: 6990, costPrice: 4658.47, supplier: 'Arroba Celulares' },
        { id: 92, name: 'Câmera DJI Osmo Action 4 Adventure Combo', spec: '📷 DJI Osmo Action 4 Adventure Combo\n🎥 Vídeos em 4K HDR a 120 fps\n🌊 À prova d’agua até 18 metros (sem case)\n🔋 Inclui 2 baterias extras + suporte de carregamento\n📱 Controle via app DJI Mimo\n📦 Pensada para esportes e ambientes extremos', salePrice: 4790.00, costPrice: 3194.13, supplier: 'DJI Grupo Multi' },
        { id: 94, name: 'Câmera DJI Osmo Action 4 Standard Combo', spec: '📷 DJI Osmo Action 4 Standard Combo\n🎥 4K ultra amplo com estabilização RockSteady\n🎯 Lente grande angular com excelente captação de luz\n📱 Integração total com o app DJI\n🧳 Compacta, ideal para vloggers e aventureiros iniciantes', salePrice: 3490.00, costPrice: 2400.00, supplier: 'DJI Grupo Multi' },
        { id: 93, name: 'Câmera DJI Osmo Action 5 Pro Standard Combo', spec: '📷 DJI Osmo Action 5 Pro Standard Combo\n🎥 4K a 120 fps com sensor aprimorado para pouca luz\n🌀 Estabilização RockSteady 3.0 + HorizonSteady\n🔋 Bateria de longa duração com carregamento rápido\n🎧 Áudio com 3 microfones e cancelamento de ruído\n📦 Perfeita para profissionais e criadores exigentes', salePrice: 4490.00, costPrice: 2992.69, supplier: 'DJI Grupo Multi' },
        { id: 97, name: 'Estabilizador DJI Osmo Mobile 7P', spec: '🎮 DJI Osmo Mobile 7P BR\n📱 Compatível com celulares grandes\n🌀 Modos de acompanhamento e gestos\n🔋 Bateria para até 10h de uso', salePrice: 2090.00, costPrice: 1396.50, supplier: 'Arroba Celulares' },
        { id: 96, name: 'Estabilizador DJI Osmo Mobile 7', spec: '🎮 DJI Osmo Mobile 7 BR\n📱 Novo sistema de equilíbrio automático\n🔋 Leve, com autonomia prolongada\n🧠 Integração nativa com app DJI', salePrice: 1249.00, costPrice: 835.23, supplier: 'Arroba Celulares' },
        { id: 99, name: 'Estabilizador DJI Osmo Mobile 6', spec: '🎮 DJI Osmo Mobile 6 (Cinza Escuro ou Platinum)\n🔋 6h de uso, com ActiveTrack 5.0\n📱 Compacto e retrátil\n🧲 Design magnético para montagem rápida', salePrice: 1390.00, costPrice: 930.10, supplier: 'Arroba Celulares' },
        { id: 95, name: 'Estabilizador DJI Osmo Mobile SE', spec: '🎮 DJI Osmo Mobile SE\n📱 Versão acessível e eficiente\n🎯 Boa estabilidade para vídeos casuais\n🧳 Ideal para iniciantes', salePrice: 990.00, costPrice: 663.49, supplier: 'Arroba Celulares' },
        { id: 33, name: 'Estabilizador DJI RS 3 Pro Combo', spec: '🎮 DJI RS 3 Pro Combo\n🎥 Suporte para câmeras profissionais até 4,5 kg\n🧠 LIDAR focagem + ActiveTrack Pro\n🔋 Até 12h de uso com bateria BG30', salePrice: 7990, costPrice: 5790.00, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 35, name: 'Estabilizador DJI RS 4 Pro Combo', spec: '🎮 DJI RS 4 Pro Combo\n🎥 Suporte avançado para rigs pesados\n📡 Conectividade profissional\n🔋 Bateria BG70 de alta duração', salePrice: 12790, costPrice: 8900.00, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 34, name: 'Estabilizador DJI RS 4 Mini', spec: '🎮 DJI RS 4 Mini\n🎥 Câmeras até 2 kg\n🔧 Ultra leve, com braço de rotação larga\n🔋 Até 10h com autonomia', salePrice: 3890, costPrice: 2840.00, supplier: 'Arroba Celulares' },
        { id: 32, name: 'Estabilizador DJI RS 3 Mini', spec: '🎮 DJI RS 3 Mini\n🎥 Ideal para câmeras mirrorless\n📦 Compacto e balanceado\n🔋 10h de bateria', salePrice: 2690, costPrice: 2335.00, supplier: 'Arroba Celulares' },
        { id: 18, name: 'Controle DJI Motion 3', spec: '🎮 DJI Motion 3\n🖐️ Controle por movimento\n🎮 Compatível com DJI Neo, Avata 2 e Air 3\n📡 Transmissão precisa + experiência imersiva', salePrice: 1099, costPrice: 734.09, supplier: 'DJI Grupo Multi' },
        { id: 19, name: 'Controle DJI RC', spec: '🎮 DJI RC\n📱 Suporte para smartphone\n📡 Alcance até 10 km\n⚖️ Design leve e ergonômico', salePrice: 3290, costPrice: 2195.65, supplier: 'Arroba Celulares' },
        { id: 20, name: 'Controle DJI RC 2', spec: '🎮 DJI RC 2\n📺 Tela HD integrada\n📡 Alcance de até 20 km\n🔋 Autonomia de 4h', salePrice: 3590, costPrice: 2395.43, supplier: 'DJI Grupo Multi' },
        { id: 21, name: 'Controle DJI RC Pro (HDMI)', spec: '🎮 DJI RC Pro (HDMI)\n🎥 Saída HDMI e sistema Android\n📡 Ultra responsivo com controle DJI Fly\n📺 Tela de alto brilho com 1000 nits', salePrice: 10990, costPrice: 7330.69, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 100, name: 'Microfone DJI Mic 2 (2 TX + 1 RX + Case)', spec: '🎤 DJI Mic 2 (2 transmissores + 1 receptor + case)\n🎧 Áudio estéreo digital de altíssima fidelidade (24-bit)\n🔋 Gravação interna com backup automático\n📡 Alcance de até 250 metros em área aberto\n🧳 Case com recarga rápida e transporte seguro\n🔗 Compatível com câmeras DSLR, celulares e computadores', salePrice: 4090.00, costPrice: 2731.69, supplier: 'Arroba Celulares' },
        { id: 36, name: 'Microfone DJI Mic Mini (1 TX + 1 RX)', spec: '🎤 DJI Mic Mini (1 transmissor + 1 receptor)\n🎧 Super compacto e leve – ideal para creators\n🔋 Autonomia de até 6 horas por unidade\n📦 Sem case de recarga – prático para uso imediato\n🎯 Plug and play com portas USB-C e Lightning', salePrice: 859, costPrice: 523.29, supplier: 'Arroba Celulares' },
        { id: 37, name: 'Microfone DJI Mic Mini (2 TX + 1 RX + Case)', spec: '🎤 DJI Mic Mini (2 transmissores + 1 receptor + case)\n🎧 Gravação estéreo dupla com sincronização inteligente\n🔋 Case de transporte com recarga automática\n📡 Conexão simultânea com dispositivos duplos\n📱 Perfeito para entrevistas, podcasts e vídeos de equipe.', salePrice: 1590, costPrice: 1062.43, supplier: 'Arroba Celulares' },
        { id: 115, name: 'Bateria DJI Neo', spec: '🔋 Bateria DJI Neo\n⏱️ Autonomia de até 18 minutos por carga\n⚡ Tecnologia LiPo com proteção inteligente\n🔌 Recarga via hub ou carregador USB-C\n📦 Compatível exclusivamente com o DJI Neo', salePrice: 0, costPrice: 0, supplier: 'Arroba Celulares' },
        { id: 12, name: 'Bateria DJI Avata', spec: '🔋 Bateria DJI Avata\n⏱️ Cerca de 18 minutos de voo FPV\n🎮 Ideal para uso com goggles e motion controller\n⚡ Proteção contra curto, descarga e superaquecimento\n📦 Peso médio: 162 g', salePrice: 1489, costPrice: 994.06, supplier: 'DJI Grupo Multi' },
        { id: 13, name: 'Bateria DJI Avata 2', spec: '🔋 Bateria DJI Avata 2\n⏱️ Aproximadamente 23 minutos de voo imersivo\n📡 Otimizada para voos com DJI Goggles 3\n⚡ Equilíbrio entre leveza e performance\n📦 Recarregável via hub dedicado', salePrice: 1149, costPrice: 767.21, supplier: 'DJI Grupo Multi' },
        { id: 104, name: 'Bateria Mini 3 Pro / 4 Pro', spec: '🔋 Bateria DJI Mini 3 / Mini 4 Pro (Standard)\n⏱️ Até 34 minutos de voo\n⚡ Compacta, com sensores de segurança\n🔋 Indicador de carga inteligente\n📦 Peso médio: 80 g', salePrice: 749.00, costPrice: 570.00, supplier: 'Arroba Celulares' },
        { id: 105, name: 'Bateria Mini 3 Pro Plus', spec: '🔋 Bateria DJI Plus Mini 3 / Mini 4 Pro (Alta Capacidade)\n⏱️ Até 45 minutos por carga\n⚡ Ideal para voos longos e gravações contínuas\n🔋 Compatível com DJI Fly – modo “max performance”\n📦 Leve e resistente', salePrice: 1190.00, costPrice: 825.00, supplier: 'Arroba Celulares' },
        { id: 15, name: 'Bateria DJI Air 3S / Air 3', spec: '🔋 Bateria DJI Air 3S / Air 3\n⏱️ Até 45 minutos por carga\n⚡ Células de alta densidade e vida útil prolongada\n📦 Compatível com modo de priorização de carga via hub\n🔋 Recarga otimizada via carregador 100W', salePrice: 1890, costPrice: 1261.94, supplier: 'DJI Grupo Multi' },
        { id: 82, name: 'Bateria DJI Mini 2 / SE / 2 SE / 4K', spec: '🔋 Bateria DJI Mini 2 / SE / 2 SE / 4K\n⏱️ Entre 22 e 31 minutos de voo (varia conforme o modelo)\n⚡ Bateria compacta, estável e eficiente\n📦 Ideal para pilotos iniciantes ou voos recreativos\n🔋 Recarregável via hub Mini 2', salePrice: 649.00, costPrice: 433.38, supplier: 'Arroba Celulares' },
        { id: 83, name: 'Bateria TB51 DJI Inspire 3', spec: '🔋 Bateria TB51 (Inspire 3)\n⏱️ Performance profissional com tempo estendido de voo\n📦 Sistema avançado de aquecimento automático\n⚡ Compatível com estação de carga DJI BS51\n🔋 Controle inteligente de ciclo e temperatura', salePrice: 3999.00, costPrice: 2669.76, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 81, name: 'Bateria de alta capacidade DJI RS BG70', spec: '🔋 Bateria DJI RS BG70 (para RS 4 Pro)\n⏱️ Até 12 horas de autonomia contínua\n⚙️ Fixação direta no estabilizador RS 4 Pro\n📦 Indicador de status em tempo real\n🔋 Recarga via conector magnético de alta voltagem', salePrice: 1490.00, costPrice: 996.07, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 79, name: 'Protetores de Hélices DJI Neo', spec: '🛡️ Protetores de Hélice DJI Neo\n⚙️ Leves, seguros e ideais para indoor', salePrice: 119.00, costPrice: 100.00, supplier: 'Arroba Celulares' },
        { id: 78, name: 'Protetores de Hélices DJI Mini 3', spec: '🛡️ Protetores de Hélice DJI Mini 3\n⚙️ Encaixe rápido, protege hélices em espaços apertados', salePrice: 379.00, costPrice: 285.00, supplier: 'Arroba Celulares' },
        { id: 77, name: 'Hélices DJI Neo – 2 Pares', spec: '🌀 Hélices DJI Neo – 2 Pares', salePrice: 79.00, costPrice: 53.06, supplier: 'Arroba Celulares' },
        { id: 75, name: 'Hélices DJI Flip – 2 Pares', spec: '🌀 Hélices DJI Flip – 2 Pares', salePrice: 104.90, costPrice: 70.31, supplier: 'Arroba Celulares' },
        { id: 73, name: 'Hélices DJI Mini 2/SE/2 SE/4K – 2 Pares', spec: '🌀 Hélices DJI Mini 2/SE/2 SE/4K – 2 Pares', salePrice: 119.00, costPrice: 53.06, supplier: 'Arroba Celulares' },
        { id: 76, name: 'Hélices DJI Inspire 3 – Par', spec: '🌀 Hélices DJI Inspire 3 – Par', salePrice: 499.00, costPrice: 391.91, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 74, name: 'Hélices DJI Avata 2 – 2 Pares', spec: '🌀 Hélices DJI Avata 2 – 2 Pares', salePrice: 109.00, costPrice: 70.31, supplier: 'DJI Grupo Multi' },
        { id: 38, name: 'DJI Goggles 3', spec: '👓 DJI Goggles 3\n📺 Duas telas OLED 1080p de alta nitidez\n🧠 Sistema de head tracking imersivo com baixa latência\n🔋 Bateria interna com até 3 horas de autonomia\n📡 Transmissão O4 compatível com Avata 2, Mini 4 Pro,  Air 3 e Neo\n🧳 Ajuste ergonômico para conforto prolongado', salePrice: 6490, costPrice: 4327.89, supplier: 'DJI Grupo Multi' },
        { id: 88, name: 'DJI Goggles N3', spec: '👓 DJI Goggles N3\n📺 Compatíveis com o DJI Neo e Motion Controller 3\n🔋 Bateria interna com até 2 horas de uso contínuo\n🌀 Imersão FPV com mínima latência\n📦 Design leve e dobrável, ideal para transporte', salePrice: 2990.00, costPrice: 1999.56, supplier: 'Arroba Celulares' },
        { id: 25, name: 'Hub de Carregamento DJI Avata 2', spec: '🔁 Hub de Carregamento DJI Avata 2\n🔋 Sistema inteligente de carregamento e equalização\n⚡ Alta eficiência térmica\n🔌 Compatível com powerbanks USB-C PD\n📦 Ideal para voos FPV com múltiplas baterias', salePrice: 499, costPrice: 333.62, supplier: 'DJI Grupo Multi' },
        { id: 26, name: 'Hub de Carregamento DJI Neo', spec: '🔁 Hub de Carregamento DJI Neo\n🔋 Carga sequencial de até 3 baterias\n⚡ Tempo médio por unidade: 75 minutos\n🔌 Compatível com carregadores 65W DJI\n📦 Leve, portátil e de encaixe rápido', salePrice: 419, costPrice: 280.00, supplier: 'Arroba Celulares' },
        { id: 27, name: 'Hub de Carregamento DJI Mini 3 / 3 Pro / 4 Pro', spec: '🔁 Hub de Carregamento DJI Mini 3 / 3 Pro / 4 Pro\n🔋 Até 3 baterias com transferência de carga\n⚡ Balanceamento automático\n📦 Ideal para operação em campo', salePrice: 519, costPrice: 347.01, supplier: 'Arroba Celulares' },
        { id: 28, name: 'Hub de Carregamento DJI Air 3 / Air 3S', spec: '🔁 Hub de Carregamento DJI Air 3 / Air 3S\n🔋 Gestão automática da ordem de carga\n⚡ Suporte a carregamento paralelo\n📱 Status visível via app DJI Fly\n📦 Compacto com LEDs indicadores', salePrice: 799, costPrice: 500.09, supplier: 'DJI Grupo Multi' },
        { id: 29, name: 'Carregador USB-C DJI 100W', spec: '⚡ Carregador USB-C DJI 100W\n🔌 Carga dupla simultânea (hub + controle)\n⚡ Reconhecimento inteligente de voltagem\n⏱️ Carga total entre 60 e 90 min por bateria\n📱 Compatível com outros dispositivos USB-C', salePrice: 619, costPrice: 415.23, supplier: 'DJI Grupo Multi' },
        { id: 30, name: 'Carregador USB-C DJI 65W', spec: '⚡ Carregador USB-C DJI 65W\n🔋 Leve e versátil\n⚡ Ideal para controles e baterias padrão DJI\n📦 Proteção contra sobrecarga e superaquecimento\n🧳 Perfeito para uso portátil', salePrice: 389, costPrice: 573.86, supplier: 'Arroba Celulares' },
        { id: 16, name: 'Estação de Energia DJI Power 1000', spec: '🔌 DJI Power 1000\n⚡ Potência total: 1000W\n🔋 Bateria interna de longa duração (1024 Wh)\n🔌 Diversas saídas: USB-C, AC, DC e carregamento solar\n📦 Ideal para operações em campo, emergências e drones de grande porte\n🧳 Design robusto, com alça retrátil e tela inteligente', salePrice: 9590, costPrice: 6314.47, supplier: 'DJI Grupo Multi' },
        { id: 17, name: 'Estação de Energia DJI Power 500', spec: '🔌 DJI Power 500\n⚡ Potência total: 500W\n🔋 Capacidade de 512 Wh\n🔌 Entradas e saídas para múltiplos dispositivos simultâneos\n📦 Portátil e eficiente para filmagens externas, inspeções ou backup em locais remotos\n🧳 Compacta e fácil de transportar', salePrice: 6190, costPrice: 4071.35, supplier: 'DJI Grupo Multi' },
        { id: 80, name: 'Sistema DJI Focus Pro – All-In-One Combo', spec: '🎯 Sistema DJI Focus Pro – All-In-One Combo\n🎥 Foco automático inteligente para câmeras profissionais\n📡 Controle remoto de alta precisão com delay ultrabaixo\n🔋 Motor silencioso com bateria integrada de longa duração\n⚙️ Compatível com estabilizadores da linha RS e câmeras DSLR/cinema\n🧠 Modos: foco manual, automático e via reconhecimento facial\n📦 Inclui motor, controle, cabo de dados e acessórios profissionais\n🧳 Ideal para produções de alto nível, cinema, comerciais e conteúdo técnico', salePrice: 16990.00, costPrice: 11133.54, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 86, name: 'Sistema DJI SDR Transmission Combo', spec: '📶 Sistema DJI SDR Transmission Combo\n📡 Transmissão de vídeo em tempo real com ultra baixa latência\n📺 Entrada HDMI para câmeras externas (profissionais ou drone FPV customizado)\n📱 Compatível com smartphones ou tablets via suportes dedicados\n🔌 Alimentação via bateria integrada ou ou fonte externa\n🎯 Ideal para transmissões ao vivo, monitoramento técnico ou gravações de precisão\n📦 Combo inclui receptor SDR, cabos, suporte de fixação e encaixes ajustáveis', salePrice: 5990.00, costPrice: 4004.27, supplier: 'Arroba Celulares' },
        { id: 84, name: 'Suporte de Telefone SDR', spec: '📱 Suporte de Telefone SDR\n🧲 Suporte magnético com ajuste de ângulo e altura\n📦 Compatível com celulares de até 7”', salePrice: 579.00, costPrice: 257.45, supplier: 'Arroba Celulares' },
        { id: 85, name: 'Suporte de Tablet SDR', spec: '💻 Suporte de Tablet SDR\n📐 Estrutura expandida para tablets de até 10”\n⚙️ Base firme com regulagem personalizada\n🧳 Ideal para visualização ampla em campo', salePrice: 579.00, costPrice: 500.09, supplier: 'Arroba Celulares' },
        { id: 89, name: 'Hard Case Mavic Air 2 / Air 2S', spec: '🎒 Hard Case Mavic Air 2 / Air 2S\n💼 Proteção rígida + interior espumado', salePrice: 599.00, costPrice: 339.72, supplier: 'Arroba Celulares' },
        { id: 90, name: 'Kit Apoio DJI RC Plus', spec: '🎒 Kit Apoio DJI RC Plus\n🧳 Tira de ombro + apoio de cintura\n🎮 Ideal para longas operações', salePrice: 769.00, costPrice: 140.73, supplier: 'GoHobby Distribuidora de VANT LTDA' },
        { id: 91, name: 'Garrafa DJI 650mL – Preto Gradiente', spec: '🥤 Garrafa DJI 650mL – Preto Gradiente\n💧 Estilo DJI com hidratação', salePrice: 149.00, costPrice: 79.88, supplier: 'DJI Grupo Multi' },
    ];
    const SUPPLIERS = [
        { 
            name: 'Arroba Celulares', 
            details: 'Origem: Goiânia – GO<br>Estoque: Arroba', 
            payment: '<strong>Pix:</strong> arrobasafra@gmail.com<br><strong>Banco:</strong> Banco Safra S.A.<br><strong>Empresa:</strong> GRAN E-COMMERCE LTDA',
            products: 'Drones da linha consumer (Neo, Mini 3, Flip), controles, baterias, Osmo, Mic, carregadores, hélices e protetores.' 
        },
        { 
            name: 'GoHobby Distribuidora de VANT LTDA', 
            details: 'Origem: São Paulo – SP<br>Estoque: GoHobby',
            payment: '<strong>Pix (CNPJ):</strong> 13.373.898/0001-95<br><strong>Banco Itaú (341):</strong> Agência: 6327, Conta Corrente: 15310-9',
            products: 'Drones Enterprise (Mavic 3E/T/Multi), Matrice 4, 30 e 350 RTK, Skyfend Hunter, Skyfend Blader, Sentinel + atualização.'
        },
        { 
            name: 'DJI Grupo Multi', 
            details: 'Origem: São Paulo – SP<br>Estoque: Grupo Multi (Distribuidor oficial DJI no Brasil)',
            payment: 'Não especificado',
            products: 'Air 3S, Avata 2, Neo combos com Goggles, Flip, câmeras Osmo Action e Pocket, estabilizadores, microfones, baterias e acessórios originais.'
        }
    ];
    const INSTALLMENT_RATES = {
        1: 0.0309, 2: 0.0579, 3: 0.0609, 4: 0.0799, 5: 0.0809, 6: 0.0818,
        7: 0.0949, 8: 0.0966, 9: 0.1037, 10: 0.1105, 11: 0.1227, 12: 0.1238
    };

    // --- ELEMENTOS DO HTML (DOM) ---
    const loginScreen = document.getElementById('login-screen');
    const appScreen = document.getElementById('app-screen');
    const loginButton = document.getElementById('login-button');
    const logoutButton = document.getElementById('logout-button');
    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');
    const loginError = document.getElementById('login-error');
    const welcomeMessage = document.getElementById('welcome-message');
    const visitorModeButton = document.getElementById('visitor-mode-button'); // Novo botão

    const navButtons = document.querySelectorAll('.nav-button');
    const contentSections = document.querySelectorAll('.content-section');
    const productsNavButton = document.getElementById('products-nav-button'); // Adicionado
    const calculatorNavButton = document.getElementById('calculator-nav-button'); // Adicionado
    const suppliersNavButton = document.getElementById('suppliers-nav-button');
    const settingsNavButton = document.getElementById('settings-nav-button');
    const dronesNavButton = document.getElementById('drones-nav-button'); // Renomeado para mais clareza para logados
    const infoEmpresaNavButton = document.getElementById('info-empresa-nav-button'); // Usando ID agora

    const productList = document.getElementById('product-list');
    const supplierList = document.getElementById('supplier-list');
    const productSearchInput = document.getElementById('product-search');
    const droneVisitorList = document.getElementById('drone-visitor-list'); // Lista de drones para visitante
    const droneVisitorSearchInput = document.getElementById('drone-visitor-search'); // Campo de busca para visitante

    const mainModal = document.getElementById('main-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalBody = document.getElementById('modal-body');
    const closeModalButton = document.querySelector('.close-button');

    const createTempUserForm = document.getElementById('create-temp-user-form');
    const tempUserFeedback = document.getElementById('temp-user-feedback');
    const mainContent = document.getElementById('main-content');
    const scrollToTopButton = document.getElementById('scroll-to-top');
    const tempUserListContainer = document.getElementById('temp-user-list');

    const generalCalcValorBase = document.getElementById('general-valor-base');
    const generalCalcPaymentRadios = document.querySelectorAll('input[name="general-payment-method"]');
    const generalCalcInstallmentsContainer = document.getElementById('general-installments-container');
    const generalCalcParcelasSelect = document.getElementById('general-parcelas');
    const generalCalculateButton = document.getElementById('general-calculate-button');
    const generalCalculatorResult = document.getElementById('general-calculator-result');

    const navToggleButton = document.getElementById('nav-toggle-btn');
    const navToggleButtonClose = document.getElementById('nav-toggle-btn-close'); // Novo botão para fechar a nav
    const navElement = document.querySelector('nav'); // O elemento nav
    const appBody = document.querySelector('.app-body');
    const headerElement = document.querySelector('header'); // Adicionado para controle de classe
    const bodyElement = document.body; // Referência ao body para alterar a classe

    // Novos elementos da IA
    const aiChatButton = document.getElementById('ai-chat-button');
    const aiChatModal = document.getElementById('ai-chat-modal');
    const aiChatCloseButton = document.getElementById('ai-chat-close-button');
    const aiQuestionInput = document.getElementById('ai-question-input');
    const submitAiQuestionButton = document.getElementById('submit-ai-question');
    const aiResponseArea = document.getElementById('ai-response-area');
    const aiLoader = document.getElementById('ai-loader');

    let currentUser = null;
    let activeSectionId = 'products-section'; // Define a seção inicial padrão para usuários logados
    let tempUserInterval;

    // --- FUNÇÕES DA API GEMINI ---
    async function callGeminiAPI(prompt, title, isProductHelp = false, productSpecs = '', isGeneralAI = false) { 
        // Se não for uma pergunta da IA geral, usa o modal principal
        if (!isGeneralAI) {
            modalTitle.textContent = title;
            modalBody.innerHTML = '<div class="loader"></div>';
            openModal(); 
        } else {
            // Se for uma pergunta da IA geral, usa o modal específico da IA
            aiChatModal.style.display = 'block';
            aiLoader.style.display = 'block';
            aiResponseArea.style.display = 'none'; // Esconde resposta anterior
            aiResponseArea.innerHTML = ''; // Limpa resposta anterior
            // Opcional: fechar o modal principal se ele estiver aberto e a IA geral for acionada
            mainModal.style.display = 'none'; 
        }

        // AVISO DE SEGURANÇA: Chaves de API expostas no frontend não são seguras para produção.
        // Por favor, considere usar um servidor backend para proteger sua chave em um ambiente real.
        const apiKey = "YOUR_GEMINI_API_KEY"; // <<<<< Substitua pela sua chave Gemini
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${apiKey}`; 
        
        let fullPrompt = prompt;
        if (isProductHelp) {
            fullPrompt = `R2D2: Responda de forma direta e clara (máximo 3 frases) à seguinte dúvida do cliente sobre o produto "${productSpecs}". Dúvida do cliente: "${prompt}"`;
        } else if (isGeneralAI) { // Nova condição para perguntas da IA geral
            fullPrompt = `Você é um assistente da Galvão Drones, especializada em drones e equipamentos DJI. Responda de forma útil, amigável e concisa (máximo 4 frases) às perguntas, utilizando o conhecimento de um especialista em drones. Se a pergunta for sobre produtos específicos da Galvão Drones, como modelos de drones ou equipamentos, use seu conhecimento para dar uma resposta detalhada sobre o universo de drones. Se a pergunta for sobre a empresa "Galvão Drones" (como localização, contato, serviços), forneça as seguintes informações: "A Galvão Drones está localizada na Rua 16, nº 304 – Setor Aeroviário, Goiânia – GO, CEP: 74435-240. Você pode nos contatar pelo telefone (62) 3636-0668 ou pelo WhatsApp 556236360668. Nosso website é www.galvaodrones.com.br e também estamos no Instagram (@galvao_drones) e YouTube (Galvão Drones)." Pergunta do usuário: "${prompt}"`;
        } else {
             fullPrompt = `R2D2: ${prompt}`;
        }

        const payload = { contents: [{ role: "user", parts: [{ text: fullPrompt }] }] };
        
        try {
            const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            if (!response.ok) {
                 const errorData = await response.json();
                 throw new Error(errorData.error.message || `Erro na API: ${response.statusText}`);
            }
            const result = await response.json();
            if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts) {
                const text = result.candidates[0].content.parts[0].text;
                if (isGeneralAI) {
                    aiResponseArea.innerHTML = text.replace(/\n/g, '<br>');
                    aiResponseArea.style.display = 'block';
                    aiLoader.style.display = 'none';
                } else {
                    modalBody.innerHTML = text.replace(/\n/g, '<br>');
